// Script to add sample vehicles to MongoDB for testing
// Run with: node scripts/add-sample-vehicles.js

const mongoose = require('mongoose');
const fs = require('fs');
const path = require('path');

// Load environment variables manually
const envPath = path.join(__dirname, '..', '.env.local');
if (fs.existsSync(envPath)) {
  const envConfig = fs.readFileSync(envPath, 'utf8');
  envConfig.split('\n').forEach(line => {
    const [key, ...valueParts] = line.split('=');
    if (key && valueParts.length) {
      process.env[key.trim()] = valueParts.join('=').trim();
    }
  });
}

const vehicleSchema = new mongoose.Schema({
  category: { type: String, enum: ['bike', 'car'], required: true },
  brand: { type: String, required: true },
  vehicleModel: { type: String, required: true },
  year: { type: Number, required: true },
  sellingPrice: { type: Number, required: true },
  purchasePrice: { type: Number },
  images: [{ type: String }],
  fuelType: { type: String, required: true },
  transmission: { type: String },
  kilometers: { type: Number, required: true },
  color: { type: String },
  city: { type: String },
  state: { type: String },
  description: { type: String },
  status: { type: String, enum: ['draft', 'for_sale', 'sold'], default: 'for_sale' },
  featured: { type: Boolean, default: false },
  availableForRent: { type: Boolean, default: false },
  rentalPricePerDay: { type: Number },
  views: { type: Number, default: 0 },
  createdAt: { type: Date, default: Date.now },
  updatedAt: { type: Date, default: Date.now },
});

const Vehicle = mongoose.models.Vehicle || mongoose.model('Vehicle', vehicleSchema);

const sampleVehicles = [
  // BIKES
  {
    category: 'bike',
    brand: 'Honda',
    vehicleModel: 'Activa 6G',
    year: 2023,
    purchasePrice: 45000,
    sellingPrice: 52000,
    images: ['https://images.unsplash.com/photo-1558981806-ec527fa84c39?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Automatic',
    kilometers: 5000,
    color: 'Red',
    city: 'Mumbai',
    state: 'Maharashtra',
    description: 'Excellent condition, single owner, all papers clear',
    status: 'for_sale',
    featured: true,
  },
  {
    category: 'bike',
    brand: 'Yamaha',
    vehicleModel: 'FZ S V3',
    year: 2022,
    purchasePrice: 65000,
    sellingPrice: 75000,
    images: ['https://images.unsplash.com/photo-1558980664-3a031cf67ea8?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 8000,
    color: 'Black',
    city: 'Pune',
    state: 'Maharashtra',
    description: 'Well maintained, new tyres, all accessories included',
    status: 'for_sale',
  },
  {
    category: 'bike',
    brand: 'Royal Enfield',
    vehicleModel: 'Classic 350',
    year: 2021,
    purchasePrice: 120000,
    sellingPrice: 140000,
    images: ['https://images.unsplash.com/photo-1609630875171-b1321377ee65?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 12000,
    color: 'Black',
    city: 'Bangalore',
    state: 'Karnataka',
    description: 'First owner, excellent engine condition, insurance valid',
    status: 'for_sale',
    featured: true,
    availableForRent: true,
    rentalPricePerDay: 800,
  },
  {
    category: 'bike',
    brand: 'Bajaj',
    vehicleModel: 'Pulsar NS200',
    year: 2023,
    purchasePrice: 95000,
    sellingPrice: 110000,
    images: ['https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 3000,
    color: 'Blue',
    city: 'Delhi',
    state: 'Delhi',
    description: 'Almost new, under warranty, all accessories',
    status: 'for_sale',
  },
  {
    category: 'bike',
    brand: 'TVS',
    vehicleModel: 'Apache RTR 160',
    year: 2022,
    purchasePrice: 70000,
    sellingPrice: 82000,
    images: ['https://images.unsplash.com/photo-1609610511991-eda2aa6e087e?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 9000,
    color: 'Red',
    city: 'Chennai',
    state: 'Tamil Nadu',
    description: 'Good condition, regular servicing done',
    status: 'for_sale',
    availableForRent: true,
    rentalPricePerDay: 600,
  },
  {
    category: 'bike',
    brand: 'KTM',
    vehicleModel: 'Duke 390',
    year: 2021,
    purchasePrice: 180000,
    sellingPrice: 210000,
    images: ['https://images.unsplash.com/photo-1558981403-c5f9899a28bc?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 15000,
    color: 'Orange',
    city: 'Hyderabad',
    state: 'Telangana',
    description: 'Sports bike in excellent condition, modified exhaust',
    status: 'for_sale',
  },
  {
    category: 'bike',
    brand: 'Hero',
    vehicleModel: 'Splendor Plus',
    year: 2023,
    purchasePrice: 40000,
    sellingPrice: 48000,
    images: ['https://images.unsplash.com/photo-1558981806-ec527fa84c39?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 2000,
    color: 'Black',
    city: 'Jaipur',
    state: 'Rajasthan',
    description: 'Brand new condition, economical bike',
    status: 'for_sale',
  },
  {
    category: 'bike',
    brand: 'Suzuki',
    vehicleModel: 'Gixxer SF',
    year: 2022,
    purchasePrice: 95000,
    sellingPrice: 115000,
    images: ['https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 7000,
    color: 'Blue',
    city: 'Ahmedabad',
    state: 'Gujarat',
    description: 'Full fairing sports bike, ABS equipped',
    status: 'for_sale',
  },

  // CARS
  {
    category: 'car',
    brand: 'Maruti Suzuki',
    vehicleModel: 'Swift VXI',
    year: 2022,
    purchasePrice: 450000,
    sellingPrice: 520000,
    images: ['https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 15000,
    color: 'White',
    city: 'Mumbai',
    state: 'Maharashtra',
    description: 'Single owner, excellent condition, company serviced',
    status: 'for_sale',
    featured: true,
  },
  {
    category: 'car',
    brand: 'Hyundai',
    vehicleModel: 'i20 Sportz',
    year: 2021,
    purchasePrice: 520000,
    sellingPrice: 600000,
    images: ['https://images.unsplash.com/photo-1583121274602-3e2820c69888?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 22000,
    color: 'Red',
    city: 'Pune',
    state: 'Maharashtra',
    description: 'Premium hatchback, touchscreen infotainment, reverse camera',
    status: 'for_sale',
  },
  {
    category: 'car',
    brand: 'Tata',
    vehicleModel: 'Nexon XZ+',
    year: 2023,
    purchasePrice: 850000,
    sellingPrice: 950000,
    images: ['https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?w=800&q=80'],
    fuelType: 'Diesel',
    transmission: 'Manual',
    kilometers: 8000,
    color: 'Blue',
    city: 'Delhi',
    state: 'Delhi',
    description: 'SUV with sunroof, under warranty, all features',
    status: 'for_sale',
    featured: true,
    availableForRent: true,
    rentalPricePerDay: 2500,
  },
  {
    category: 'car',
    brand: 'Mahindra',
    vehicleModel: 'Scorpio S11',
    year: 2020,
    purchasePrice: 950000,
    sellingPrice: 1100000,
    images: ['https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?w=800&q=80'],
    fuelType: 'Diesel',
    transmission: 'Manual',
    kilometers: 35000,
    color: 'White',
    city: 'Bangalore',
    state: 'Karnataka',
    description: '7-seater SUV, powerful engine, well maintained',
    status: 'for_sale',
  },
  {
    category: 'car',
    brand: 'Honda',
    vehicleModel: 'City VX',
    year: 2022,
    purchasePrice: 850000,
    sellingPrice: 980000,
    images: ['https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Automatic',
    kilometers: 18000,
    color: 'Silver',
    city: 'Chennai',
    state: 'Tamil Nadu',
    description: 'Luxury sedan, CVT transmission, sunroof',
    status: 'for_sale',
  },
  {
    category: 'car',
    brand: 'Toyota',
    vehicleModel: 'Fortuner 4x4',
    year: 2021,
    purchasePrice: 2800000,
    sellingPrice: 3200000,
    images: ['https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?w=800&q=80'],
    fuelType: 'Diesel',
    transmission: 'Automatic',
    kilometers: 28000,
    color: 'Black',
    city: 'Mumbai',
    state: 'Maharashtra',
    description: 'Premium SUV, leather seats, all features, excellent condition',
    status: 'for_sale',
    availableForRent: true,
    rentalPricePerDay: 5000,
  },
  {
    category: 'car',
    brand: 'Maruti Suzuki',
    vehicleModel: 'Baleno Alpha',
    year: 2023,
    purchasePrice: 700000,
    sellingPrice: 780000,
    images: ['https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Automatic',
    kilometers: 5000,
    color: 'Blue',
    city: 'Hyderabad',
    state: 'Telangana',
    description: 'Premium hatchback, top variant, under warranty',
    status: 'for_sale',
  },
  {
    category: 'car',
    brand: 'Volkswagen',
    vehicleModel: 'Polo GT TSI',
    year: 2022,
    purchasePrice: 650000,
    sellingPrice: 750000,
    images: ['https://images.unsplash.com/photo-1583121274602-3e2820c69888?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Automatic',
    kilometers: 12000,
    color: 'Red',
    city: 'Pune',
    state: 'Maharashtra',
    description: 'Turbo petrol, DSG transmission, sporty hatchback',
    status: 'for_sale',
  },
  {
    category: 'car',
    brand: 'Hyundai',
    vehicleModel: 'Creta SX',
    year: 2022,
    purchasePrice: 1100000,
    sellingPrice: 1280000,
    images: ['https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Automatic',
    kilometers: 20000,
    color: 'White',
    city: 'Bangalore',
    state: 'Karnataka',
    description: 'Popular compact SUV, panoramic sunroof, iMT transmission',
    status: 'for_sale',
    featured: true,
  },
  {
    category: 'car',
    brand: 'Tata',
    vehicleModel: 'Altroz XZ',
    year: 2023,
    purchasePrice: 600000,
    sellingPrice: 680000,
    images: ['https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&q=80'],
    fuelType: 'Petrol',
    transmission: 'Manual',
    kilometers: 6000,
    color: 'Grey',
    city: 'Surat',
    state: 'Gujarat',
    description: 'Premium hatchback, 5-star safety rating, spacious',
    status: 'for_sale',
  },
  {
    category: 'car',
    brand: 'Mahindra',
    vehicleModel: 'XUV700 AX7',
    year: 2023,
    purchasePrice: 1850000,
    sellingPrice: 2050000,
    images: ['https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?w=800&q=80'],
    fuelType: 'Diesel',
    transmission: 'Automatic',
    kilometers: 10000,
    color: 'Blue',
    city: 'Delhi',
    state: 'Delhi',
    description: 'Latest SUV, ADAS features, panoramic sunroof, under warranty',
    status: 'for_sale',
  },
];

async function addSampleVehicles() {
  try {
    console.log('Connecting to MongoDB...');
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('Connected to MongoDB!');

    // Clear existing vehicles (optional - comment out if you want to keep existing data)
    console.log('Clearing existing vehicles...');
    await Vehicle.deleteMany({});

    // Add sample vehicles
    console.log('Adding sample vehicles...');
    const result = await Vehicle.insertMany(sampleVehicles);
    console.log(`âœ… Successfully added ${result.length} sample vehicles!`);

    // Display summary
    const bikeCount = result.filter((v) => v.category === 'bike').length;
    const carCount = result.filter((v) => v.category === 'car').length;
    console.log(`ðŸ“Š Summary: ${bikeCount} bikes, ${carCount} cars`);

    await mongoose.disconnect();
    console.log('Disconnected from MongoDB.');
  } catch (error) {
    console.error('Error adding sample vehicles:', error);
    process.exit(1);
  }
}

addSampleVehicles();
